{% extends "base.html" %}

{% block title %}Create Project Proposal - BlockFund{% endblock %}

{% block styles %}
<link href="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.css" rel="stylesheet">
{% endblock %}

{% block content %}
<div class="container py-5">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="card shadow-sm">
                <div class="card-header bg-primary text-white">
                    <h4 class="mb-0">Create Investment Proposal</h4>
                </div>
                <div class="card-body p-4">
                    <form method="POST" action="" enctype="multipart/form-data">
                        <!-- Project Basic Information -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2">Project Information</h5>
                            
                            <div class="mb-3">
                                <label for="project_title" class="form-label">Project Title</label>
                                <input type="text" class="form-control" id="project_title" name="project_title" required>
                            </div>
                            
                            <div class="mb-3">
                                <label for="project_category" class="form-label">Category</label>
                                <select class="form-select" id="project_category" name="project_category" required>
                                    <option value="" selected disabled>Select a category</option>
                                    <option value="technology">Technology</option>
                                    <option value="real_estate">Real Estate</option>
                                    <option value="energy">Energy</option>
                                    <option value="healthcare">Healthcare</option>
                                    <option value="education">Education</option>
                                    <option value="finance">Finance</option>
                                    <option value="agriculture">Agriculture</option>
                                    <option value="other">Other</option>
                                </select>
                            </div>
                            
                            <div class="mb-3">
                                <label for="project_summary" class="form-label">Project Summary (max 250 characters)</label>
                                <textarea class="form-control" id="project_summary" name="project_summary" rows="2" maxlength="250" required></textarea>
                                <div class="form-text"><span id="summary_counter">0</span>/250 characters</div>
                            </div>
                            
                            <div class="mb-3">
                                <label for="project_description" class="form-label">Detailed Description</label>
                                <textarea id="project_description" name="project_description" required></textarea>
                            </div>
                        </div>
                        
                        <!-- Funding Details -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2">Funding Information</h5>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="target_amount" class="form-label">Target Fundraising Amount ($)</label>
                                    <input type="number" class="form-control" id="target_amount" name="target_amount" min="1000" step="100" required>
                                    <div class="form-text">Minimum allowed: $1,000</div>
                                </div>
                                <div class="col-md-6">
                                    <label for="min_investment" class="form-label">Minimum Investment per Investor ($)</label>
                                    <input type="number" class="form-control" id="min_investment" name="min_investment" min="100" step="50" required>
                                    <div class="form-text">Minimum allowed: $100</div>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="interest_rate" class="form-label">Interest Rate (%)</label>
                                    <input type="number" class="form-control" id="interest_rate" name="interest_rate" min="0.1" max="30" step="0.1" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="min_investors" class="form-label">Minimum Investors</label>
                                    <input type="number" class="form-control" id="min_investors" name="min_investors" min="1" required>
                                </div>
                                <div class="col-md-4">
                                    <label for="max_investors" class="form-label">Maximum Investors</label>
                                    <input type="number" class="form-control" id="max_investors" name="max_investors" min="1" required>
                                </div>
                            </div>
                            
                            <div class="row mb-3">
                                <div class="col-md-6">
                                    <label for="repayment_period" class="form-label">Repayment Period (months)</label>
                                    <input type="number" class="form-control" id="repayment_period" name="repayment_period" min="1" max="60" required>
                                </div>
                                <div class="col-md-6">
                                    <label for="repayment_method" class="form-label">Repayment Method</label>
                                    <select class="form-select" id="repayment_method" name="repayment_method" required>
                                        <option value="" selected disabled>Select a method</option>
                                        <option value="monthly">Monthly</option>
                                        <option value="quarterly">Quarterly</option>
                                        <option value="semi_annual">Semi-Annual</option>
                                        <option value="annual">Annual</option>
                                        <option value="bullet">Bullet (End of term)</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Collateral Information -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2">Collateral Information</h5>
                            
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="has_collateral" name="has_collateral">
                                    <label class="form-check-label" for="has_collateral">Provide Collateral</label>
                                </div>
                                <div class="form-text">Providing collateral increases investor trust and may improve your funding success rate</div>
                            </div>
                            
                            <div id="collateral_fields" class="d-none">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="collateral_type" class="form-label">Collateral Type</label>
                                        <select class="form-select" id="collateral_type" name="collateral_type">
                                            <option value="" selected disabled>Select collateral type</option>
                                            <option value="crypto">Cryptocurrency</option>
                                            <option value="token">Tokens</option>
                                            <option value="real_estate">Real Estate</option>
                                            <option value="equipment">Equipment</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="collateral_value" class="form-label">Estimated Value ($)</label>
                                        <input type="number" class="form-control" id="collateral_value" name="collateral_value" min="0">
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="collateral_description" class="form-label">Collateral Description</label>
                                    <textarea class="form-control" id="collateral_description" name="collateral_description" rows="3"></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Document Uploads -->
                        <div class="mb-4">
                            <h5 class="border-bottom pb-2">Supporting Documents</h5>
                            
                            <div class="mb-3">
                                <label for="business_plan" class="form-label">Business Plan (PDF)</label>
                                <input type="file" class="form-control" id="business_plan" name="business_plan" accept=".pdf">
                            </div>
                            
                            <div class="mb-3">
                                <label for="financial_projections" class="form-label">Financial Projections (PDF, Excel)</label>
                                <input type="file" class="form-control" id="financial_projections" name="financial_projections" accept=".pdf,.xlsx,.xls">
                            </div>
                            
                            <div class="mb-3">
                                <label for="additional_documents" class="form-label">Additional Supporting Documents</label>
                                <input type="file" class="form-control" id="additional_documents" name="additional_documents" multiple>
                            </div>
                        </div>
                        
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="terms_agree" name="terms_agree" required>
                            <label class="form-check-label" for="terms_agree">
                                I confirm that all information provided is accurate and I agree to the <a href="#">Terms of Service</a>
                            </label>
                        </div>
                        
                        <div class="text-end">
                            <button type="button" class="btn btn-outline-secondary me-2">Save as Draft</button>
                            <button type="submit" class="btn btn-primary">Submit Proposal</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdn.jsdelivr.net/npm/summernote@0.8.18/dist/summernote-bs4.min.js"></script>
<script>
    $(document).ready(function() {
        // Initialize rich text editor
        $('#project_description').summernote({
            placeholder: 'Provide a detailed description of your project...',
            height: 300,
            toolbar: [
                ['style', ['style']],
                ['font', ['bold', 'underline', 'clear']],
                ['color', ['color']],
                ['para', ['ul', 'ol', 'paragraph']],
                ['table', ['table']],
                ['insert', ['link']],
                ['view', ['fullscreen', 'codeview', 'help']]
            ]
        });
        
        // Character counter for summary
        $('#project_summary').on('input', function() {
            $('#summary_counter').text($(this).val().length);
        });
        
        // Toggle collateral fields
        $('#has_collateral').change(function() {
            if(this.checked) {
                $('#collateral_fields').removeClass('d-none');
            } else {
                $('#collateral_fields').addClass('d-none');
            }
        });
    });
</script>
{% endblock %}